{"ast":null,"code":"/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\nimport { ClientAuthError } from \"../error/ClientAuthError\";\nimport { UrlUtils } from \"./UrlUtils\";\nimport { TemporaryCacheKeys, Constants } from \"./Constants\";\nimport { TimeUtils } from \"./TimeUtils\";\nvar WindowUtils = /** @class */function () {\n  function WindowUtils() {}\n  /**\n   * @hidden\n   * Checks if the current page is running in an iframe.\n   * @ignore\n   */\n  WindowUtils.isInIframe = function () {\n    return window.parent !== window;\n  };\n  /**\n   * @hidden\n   * Check if the current page is running in a popup.\n   * @ignore\n   */\n  WindowUtils.isInPopup = function () {\n    return !!(window.opener && window.opener !== window);\n  };\n  /**\n   * @hidden\n   * @param prefix\n   * @param scopes\n   * @param authority\n   */\n  WindowUtils.generateFrameName = function (prefix, requestSignature) {\n    return \"\" + prefix + Constants.resourceDelimiter + requestSignature;\n  };\n  /**\n   * @hidden\n   * Polls an iframe until it loads a url with a hash\n   * @ignore\n   */\n  WindowUtils.monitorIframeForHash = function (contentWindow, timeout, urlNavigate, logger) {\n    return new Promise(function (resolve, reject) {\n      /*\n       * Polling for iframes can be purely timing based,\n       * since we don't need to account for interaction.\n       */\n      var nowMark = TimeUtils.relativeNowMs();\n      var timeoutMark = nowMark + timeout;\n      logger.verbose(\"monitorWindowForIframe polling started\");\n      var intervalId = setInterval(function () {\n        if (TimeUtils.relativeNowMs() > timeoutMark) {\n          logger.error(\"monitorIframeForHash unable to find hash in url, timing out\");\n          logger.errorPii(\"monitorIframeForHash polling timed out for url: \" + urlNavigate);\n          clearInterval(intervalId);\n          reject(ClientAuthError.createTokenRenewalTimeoutError());\n          return;\n        }\n        var href;\n        try {\n          /*\n           * Will throw if cross origin,\n           * which should be caught and ignored\n           * since we need the interval to keep running while on STS UI.\n           */\n          href = contentWindow.location.href;\n        } catch (e) {}\n        if (href && UrlUtils.urlContainsHash(href)) {\n          logger.verbose(\"monitorIframeForHash found url in hash\");\n          clearInterval(intervalId);\n          resolve(contentWindow.location.hash);\n        }\n      }, WindowUtils.POLLING_INTERVAL_MS);\n    });\n  };\n  /**\n   * @hidden\n   * Polls a popup until it loads a url with a hash\n   * @ignore\n   */\n  WindowUtils.monitorPopupForHash = function (contentWindow, timeout, urlNavigate, logger) {\n    return new Promise(function (resolve, reject) {\n      /*\n       * Polling for popups needs to be tick-based,\n       * since a non-trivial amount of time can be spent on interaction (which should not count against the timeout).\n       */\n      var maxTicks = timeout / WindowUtils.POLLING_INTERVAL_MS;\n      var ticks = 0;\n      logger.verbose(\"monitorWindowForHash polling started\");\n      var intervalId = setInterval(function () {\n        if (contentWindow.closed) {\n          logger.error(\"monitorWindowForHash window closed\");\n          clearInterval(intervalId);\n          reject(ClientAuthError.createUserCancelledError());\n          return;\n        }\n        var href;\n        try {\n          /*\n           * Will throw if cross origin,\n           * which should be caught and ignored\n           * since we need the interval to keep running while on STS UI.\n           */\n          href = contentWindow.location.href;\n        } catch (e) {}\n        // Don't process blank pages or cross domain\n        if (!href || href === \"about:blank\") {\n          return;\n        }\n        /*\n         * Only run clock when we are on same domain for popups\n         * as popup operations can take a long time.\n         */\n        ticks++;\n        if (href && UrlUtils.urlContainsHash(href)) {\n          logger.verbose(\"monitorPopupForHash found url in hash\");\n          clearInterval(intervalId);\n          var hash = contentWindow.location.hash;\n          WindowUtils.clearUrlFragment(contentWindow);\n          resolve(hash);\n        } else if (ticks > maxTicks) {\n          logger.error(\"monitorPopupForHash unable to find hash in url, timing out\");\n          logger.errorPii(\"monitorPopupForHash polling timed out for url: \" + urlNavigate);\n          clearInterval(intervalId);\n          reject(ClientAuthError.createTokenRenewalTimeoutError());\n        }\n      }, WindowUtils.POLLING_INTERVAL_MS);\n    });\n  };\n  /**\n   * @hidden\n   * Loads iframe with authorization endpoint URL\n   * @ignore\n   */\n  WindowUtils.loadFrame = function (urlNavigate, frameName, timeoutMs, logger) {\n    var _this = this;\n    /*\n     * This trick overcomes iframe navigation in IE\n     * IE does not load the page consistently in iframe\n     */\n    logger.infoPii(\"LoadFrame: \" + frameName);\n    return new Promise(function (resolve, reject) {\n      setTimeout(function () {\n        var frameHandle = _this.loadFrameSync(urlNavigate, frameName, logger);\n        if (!frameHandle) {\n          reject(\"Unable to load iframe with name: \" + frameName);\n          return;\n        }\n        resolve(frameHandle);\n      }, timeoutMs);\n    });\n  };\n  /**\n   * @hidden\n   * Loads the iframe synchronously when the navigateTimeFrame is set to `0`\n   * @param urlNavigate\n   * @param frameName\n   * @param logger\n   */\n  WindowUtils.loadFrameSync = function (urlNavigate, frameName, logger) {\n    var frameHandle = WindowUtils.addHiddenIFrame(frameName, logger);\n    // returning to handle null in loadFrame, also to avoid null object access errors\n    if (!frameHandle) {\n      return null;\n    } else if (frameHandle.src === \"\" || frameHandle.src === \"about:blank\") {\n      frameHandle.src = urlNavigate;\n      logger.infoPii(\"Frame Name : \" + frameName + \" Navigated to: \" + urlNavigate);\n    }\n    return frameHandle;\n  };\n  /**\n   * @hidden\n   * Adds the hidden iframe for silent token renewal.\n   * @ignore\n   */\n  WindowUtils.addHiddenIFrame = function (iframeId, logger) {\n    if (typeof iframeId === \"undefined\") {\n      return null;\n    }\n    logger.info(\"Add msal iframe to document\");\n    logger.infoPii(\"Add msal frame to document:\" + iframeId);\n    var adalFrame = document.getElementById(iframeId);\n    if (!adalFrame) {\n      logger.verbose(\"Add msal iframe does not exist\");\n      var ifr = document.createElement(\"iframe\");\n      ifr.setAttribute(\"id\", iframeId);\n      ifr.setAttribute(\"aria-hidden\", \"true\");\n      ifr.style.visibility = \"hidden\";\n      ifr.style.position = \"absolute\";\n      ifr.style.width = ifr.style.height = \"0\";\n      ifr.style.border = \"0\";\n      ifr.setAttribute(\"sandbox\", \"allow-scripts allow-same-origin allow-forms\");\n      adalFrame = document.getElementsByTagName(\"body\")[0].appendChild(ifr);\n    } else {\n      logger.verbose(\"Add msal iframe already exists\");\n    }\n    return adalFrame;\n  };\n  /**\n   * @hidden\n   * Removes a hidden iframe from the page.\n   * @ignore\n   */\n  WindowUtils.removeHiddenIframe = function (iframe) {\n    if (document.body === iframe.parentNode) {\n      document.body.removeChild(iframe);\n    }\n  };\n  /**\n   * @hidden\n   * Find and return the iframe element with the given hash\n   * @ignore\n   */\n  WindowUtils.getIframeWithHash = function (hash) {\n    var iframes = document.getElementsByTagName(\"iframe\");\n    var iframeArray = Array.apply(null, Array(iframes.length)).map(function (iframe, index) {\n      return iframes.item(index);\n    }); // eslint-disable-line prefer-spread\n    return iframeArray.filter(function (iframe) {\n      try {\n        return iframe.contentWindow.location.hash === hash;\n      } catch (e) {\n        return false;\n      }\n    })[0];\n  };\n  /**\n   * @hidden\n   * Returns an array of all the popups opened by MSAL\n   * @ignore\n   */\n  WindowUtils.getPopups = function () {\n    if (!window.openedWindows) {\n      window.openedWindows = [];\n    }\n    return window.openedWindows;\n  };\n  /**\n   * @hidden\n   * Find and return the popup with the given hash\n   * @ignore\n   */\n  WindowUtils.getPopUpWithHash = function (hash) {\n    return WindowUtils.getPopups().filter(function (popup) {\n      try {\n        return popup.location.hash === hash;\n      } catch (e) {\n        return false;\n      }\n    })[0];\n  };\n  /**\n   * @hidden\n   * Add the popup to the known list of popups\n   * @ignore\n   */\n  WindowUtils.trackPopup = function (popup) {\n    WindowUtils.getPopups().push(popup);\n  };\n  /**\n   * @hidden\n   * Close all popups\n   * @ignore\n   */\n  WindowUtils.closePopups = function () {\n    WindowUtils.getPopups().forEach(function (popup) {\n      return popup.close();\n    });\n  };\n  /**\n   * @ignore\n   *\n   * blocks any login/acquireToken calls to reload from within a hidden iframe (generated for silent calls)\n   */\n  WindowUtils.blockReloadInHiddenIframes = function () {\n    // return an error if called from the hidden iframe created by the msal js silent calls\n    if (UrlUtils.urlContainsHash(window.location.hash) && WindowUtils.isInIframe()) {\n      throw ClientAuthError.createBlockTokenRequestsInHiddenIframeError();\n    }\n  };\n  /**\n   *\n   * @param cacheStorage\n   */\n  WindowUtils.checkIfBackButtonIsPressed = function (cacheStorage) {\n    var redirectCache = cacheStorage.getItem(TemporaryCacheKeys.REDIRECT_REQUEST);\n    // if redirect request is set and there is no hash\n    if (redirectCache && !UrlUtils.urlContainsHash(window.location.hash)) {\n      var splitCache = redirectCache.split(Constants.resourceDelimiter);\n      splitCache.shift();\n      var state = splitCache.length > 0 ? splitCache.join(Constants.resourceDelimiter) : null;\n      cacheStorage.resetTempCacheItems(state);\n    }\n  };\n  /**\n   * Removes url fragment from browser url\n   */\n  WindowUtils.clearUrlFragment = function (contentWindow) {\n    contentWindow.location.hash = \"\";\n    // Office.js sets history.replaceState to null\n    if (typeof contentWindow.history.replaceState === \"function\") {\n      // Full removes \"#\" from url\n      contentWindow.history.replaceState(null, null, \"\" + contentWindow.location.pathname + contentWindow.location.search);\n    }\n  };\n  /**\n   * @hidden\n   * Interval in milliseconds that we poll a window\n   * @ignore\n   */\n  WindowUtils.POLLING_INTERVAL_MS = 50;\n  return WindowUtils;\n}();\nexport { WindowUtils };","map":{"version":3,"mappings":"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","names":["ClientAuthError","UrlUtils","TemporaryCacheKeys","Constants","TimeUtils","WindowUtils","window","parent","opener","prefix","requestSignature","resourceDelimiter","contentWindow","timeout","urlNavigate","logger","Promise","resolve","reject","nowMark","relativeNowMs","timeoutMark","verbose","intervalId","setInterval","error","errorPii","clearInterval","createTokenRenewalTimeoutError","href","location","e","urlContainsHash","hash","POLLING_INTERVAL_MS","maxTicks","ticks","closed","createUserCancelledError","clearUrlFragment","frameName","timeoutMs","infoPii","setTimeout","frameHandle","_this","loadFrameSync","addHiddenIFrame","src","iframeId","info","adalFrame","document","getElementById","ifr","createElement","setAttribute","style","visibility","position","width","height","border","getElementsByTagName","appendChild","iframe","body","parentNode","removeChild","iframes","iframeArray","Array","apply","length","map","index","item","filter","openedWindows","getPopups","popup","push","forEach","close","isInIframe","createBlockTokenRequestsInHiddenIframeError","cacheStorage","redirectCache","getItem","REDIRECT_REQUEST","splitCache","split","shift","state","join","resetTempCacheItems","history","replaceState","pathname","search"],"sourceRoot":"","sources":["../../src/utils/WindowUtils.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}