{"ast":null,"code":"/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\nimport { ClientConfigurationError } from \"../error/ClientConfigurationError\";\nimport { AuthError } from \"../error/AuthError\";\n/**\n * @hidden\n */\nvar BrowserStorage = /** @class */function () {\n  function BrowserStorage(cacheLocation) {\n    if (!window) {\n      throw AuthError.createNoWindowObjectError(\"Browser storage class could not find window object\");\n    }\n    var storageSupported = typeof window[cacheLocation] !== \"undefined\" && window[cacheLocation] !== null;\n    if (!storageSupported) {\n      throw ClientConfigurationError.createStorageNotSupportedError(cacheLocation);\n    }\n    this.cacheLocation = cacheLocation;\n  }\n  /**\n   * add value to storage\n   * @param key\n   * @param value\n   * @param enableCookieStorage\n   */\n  BrowserStorage.prototype.setItem = function (key, value, enableCookieStorage) {\n    window[this.cacheLocation].setItem(key, value);\n    if (enableCookieStorage) {\n      this.setItemCookie(key, value);\n    }\n  };\n  /**\n   * get one item by key from storage\n   * @param key\n   * @param enableCookieStorage\n   */\n  BrowserStorage.prototype.getItem = function (key, enableCookieStorage) {\n    if (enableCookieStorage && this.getItemCookie(key)) {\n      return this.getItemCookie(key);\n    }\n    return window[this.cacheLocation].getItem(key);\n  };\n  /**\n   * remove value from storage\n   * @param key\n   */\n  BrowserStorage.prototype.removeItem = function (key) {\n    return window[this.cacheLocation].removeItem(key);\n  };\n  /**\n   * clear storage (remove all items from it)\n   */\n  BrowserStorage.prototype.clear = function () {\n    return window[this.cacheLocation].clear();\n  };\n  /**\n   * add value to cookies\n   * @param cName\n   * @param cValue\n   * @param expires\n   */\n  BrowserStorage.prototype.setItemCookie = function (cName, cValue, expires) {\n    var cookieStr = encodeURIComponent(cName) + \"=\" + encodeURIComponent(cValue) + \";path=/;\";\n    if (expires) {\n      var expireTime = this.getCookieExpirationTime(expires);\n      cookieStr += \"expires=\" + expireTime + \";\";\n    }\n    document.cookie = cookieStr;\n  };\n  /**\n   * get one item by key from cookies\n   * @param cName\n   */\n  BrowserStorage.prototype.getItemCookie = function (cName) {\n    var name = encodeURIComponent(cName) + \"=\";\n    var ca = document.cookie.split(\";\");\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i];\n      while (c.charAt(0) === \" \") {\n        c = c.substring(1);\n      }\n      if (c.indexOf(name) === 0) {\n        return decodeURIComponent(c.substring(name.length, c.length));\n      }\n    }\n    return \"\";\n  };\n  /**\n   * Clear an item in the cookies by key\n   * @param cName\n   */\n  BrowserStorage.prototype.clearItemCookie = function (cName) {\n    this.setItemCookie(cName, \"\", -1);\n  };\n  /**\n   * Get cookie expiration time\n   * @param cookieLifeDays\n   */\n  BrowserStorage.prototype.getCookieExpirationTime = function (cookieLifeDays) {\n    var today = new Date();\n    var expr = new Date(today.getTime() + cookieLifeDays * 24 * 60 * 60 * 1000);\n    return expr.toUTCString();\n  };\n  return BrowserStorage;\n}();\nexport { BrowserStorage };","map":{"version":3,"mappings":"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","names":["ClientConfigurationError","AuthError","cacheLocation","window","createNoWindowObjectError","storageSupported","createStorageNotSupportedError","BrowserStorage","key","value","enableCookieStorage","setItem","setItemCookie","getItemCookie","getItem","removeItem","clear","cName","cValue","expires","cookieStr","encodeURIComponent","expireTime","getCookieExpirationTime","document","cookie","name","ca","split","i","length","c","charAt","substring","indexOf","decodeURIComponent","cookieLifeDays","today","Date","expr","getTime","toUTCString"],"sourceRoot":"","sources":["../../src/cache/BrowserStorage.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}